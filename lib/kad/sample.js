"use strict";

var _simpleDatachannel = require("simple-datachannel");

var _simpleDatachannel2 = _interopRequireDefault(_simpleDatachannel);

var _sha = require("sha1");

var _sha2 = _interopRequireDefault(_sha);

var _Kademlia = require("./Kademlia");

var _Kademlia2 = _interopRequireDefault(_Kademlia);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var peerOffer = new _simpleDatachannel2.default();
var peerAnswer = new _simpleDatachannel2.default();

var kadOffer = new _Kademlia2.default((0, _sha2.default)(Math.random().toString()));
var kadAnswer = new _Kademlia2.default((0, _sha2.default)(Math.random().toString()));

peerOffer.makeOffer({ disable_stun: true });
peerOffer.ev.on("signal", function (sdp) {
  console.log("offer signal");
  peerAnswer.makeAnswer(sdp, { disable_stun: true });
  peerAnswer.ev.on("signal", function (sdp) {
    peerOffer.setAnswer(sdp);
  });
});
peerOffer.ev.once("connect", function () {
  console.log("offer connected");
  kadOffer.addknode(peerOffer);
});
peerAnswer.ev.once("connect", function () {
  console.log("answer connected");
  kadAnswer.addknode(peerAnswer);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9rYWQvc2FtcGxlLmpzIl0sIm5hbWVzIjpbInBlZXJPZmZlciIsIldlYlJUQyIsInBlZXJBbnN3ZXIiLCJrYWRPZmZlciIsIkthZGVtbGlhIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwia2FkQW5zd2VyIiwibWFrZU9mZmVyIiwiZGlzYWJsZV9zdHVuIiwiZXYiLCJvbiIsImNvbnNvbGUiLCJsb2ciLCJtYWtlQW5zd2VyIiwic2RwIiwic2V0QW5zd2VyIiwib25jZSIsImFkZGtub2RlIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBQ0EsSUFBTUEsWUFBWSxJQUFJQywyQkFBSixFQUFsQjtBQUNBLElBQU1DLGFBQWEsSUFBSUQsMkJBQUosRUFBbkI7O0FBRUEsSUFBTUUsV0FBVyxJQUFJQyxrQkFBSixDQUFhLG1CQUFLQyxLQUFLQyxNQUFMLEdBQWNDLFFBQWQsRUFBTCxDQUFiLENBQWpCO0FBQ0EsSUFBTUMsWUFBWSxJQUFJSixrQkFBSixDQUFhLG1CQUFLQyxLQUFLQyxNQUFMLEdBQWNDLFFBQWQsRUFBTCxDQUFiLENBQWxCOztBQUVBUCxVQUFVUyxTQUFWLENBQW9CLEVBQUVDLGNBQWMsSUFBaEIsRUFBcEI7QUFDQVYsVUFBVVcsRUFBVixDQUFhQyxFQUFiLENBQWdCLFFBQWhCLEVBQTBCLGVBQU87QUFDL0JDLFVBQVFDLEdBQVIsQ0FBWSxjQUFaO0FBQ0FaLGFBQVdhLFVBQVgsQ0FBc0JDLEdBQXRCLEVBQTJCLEVBQUVOLGNBQWMsSUFBaEIsRUFBM0I7QUFDQVIsYUFBV1MsRUFBWCxDQUFjQyxFQUFkLENBQWlCLFFBQWpCLEVBQTJCLGVBQU87QUFDaENaLGNBQVVpQixTQUFWLENBQW9CRCxHQUFwQjtBQUNELEdBRkQ7QUFHRCxDQU5EO0FBT0FoQixVQUFVVyxFQUFWLENBQWFPLElBQWIsQ0FBa0IsU0FBbEIsRUFBNkIsWUFBTTtBQUNqQ0wsVUFBUUMsR0FBUixDQUFZLGlCQUFaO0FBQ0FYLFdBQVNnQixRQUFULENBQWtCbkIsU0FBbEI7QUFDRCxDQUhEO0FBSUFFLFdBQVdTLEVBQVgsQ0FBY08sSUFBZCxDQUFtQixTQUFuQixFQUE4QixZQUFNO0FBQ2xDTCxVQUFRQyxHQUFSLENBQVksa0JBQVo7QUFDQU4sWUFBVVcsUUFBVixDQUFtQmpCLFVBQW5CO0FBQ0QsQ0FIRCIsImZpbGUiOiJzYW1wbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgV2ViUlRDIGZyb20gXCJzaW1wbGUtZGF0YWNoYW5uZWxcIjtcbmltcG9ydCBzaGExIGZyb20gXCJzaGExXCI7XG5pbXBvcnQgS2FkZW1saWEgZnJvbSBcIi4vS2FkZW1saWFcIjtcbmNvbnN0IHBlZXJPZmZlciA9IG5ldyBXZWJSVEMoKTtcbmNvbnN0IHBlZXJBbnN3ZXIgPSBuZXcgV2ViUlRDKCk7XG5cbmNvbnN0IGthZE9mZmVyID0gbmV3IEthZGVtbGlhKHNoYTEoTWF0aC5yYW5kb20oKS50b1N0cmluZygpKSk7XG5jb25zdCBrYWRBbnN3ZXIgPSBuZXcgS2FkZW1saWEoc2hhMShNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkpKTtcblxucGVlck9mZmVyLm1ha2VPZmZlcih7IGRpc2FibGVfc3R1bjogdHJ1ZSB9KTtcbnBlZXJPZmZlci5ldi5vbihcInNpZ25hbFwiLCBzZHAgPT4ge1xuICBjb25zb2xlLmxvZyhcIm9mZmVyIHNpZ25hbFwiKTtcbiAgcGVlckFuc3dlci5tYWtlQW5zd2VyKHNkcCwgeyBkaXNhYmxlX3N0dW46IHRydWUgfSk7XG4gIHBlZXJBbnN3ZXIuZXYub24oXCJzaWduYWxcIiwgc2RwID0+IHtcbiAgICBwZWVyT2ZmZXIuc2V0QW5zd2VyKHNkcCk7XG4gIH0pO1xufSk7XG5wZWVyT2ZmZXIuZXYub25jZShcImNvbm5lY3RcIiwgKCkgPT4ge1xuICBjb25zb2xlLmxvZyhcIm9mZmVyIGNvbm5lY3RlZFwiKTtcbiAga2FkT2ZmZXIuYWRka25vZGUocGVlck9mZmVyKTtcbn0pO1xucGVlckFuc3dlci5ldi5vbmNlKFwiY29ubmVjdFwiLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiYW5zd2VyIGNvbm5lY3RlZFwiKTtcbiAga2FkQW5zd2VyLmFkZGtub2RlKHBlZXJBbnN3ZXIpO1xufSk7XG4iXX0=