"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.networkFormat = networkFormat;
exports.default = void 0;

var _sha = _interopRequireDefault(require("sha1"));

var _bson = require("bson");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _default = {
  STORE: "STORE",
  FINDNODE: "FINDNODE",
  FINDNODE_R: "FINDNODE_R",
  FINDVALUE: "FINDVALUE",
  FINDVALUE_R: "FINDVALUE_R",
  PING: "PING",
  PONG: "PONG",
  ONCOMMAND: "ONCOMMAND",
  ADD_KNODE: "ADD_KNODE",
  DISCONNECT_KNODE: "DISCONNECT_KNODE",
  BROADCAST: "BROADCAST",
  SEND: "SEND"
};
exports.default = _default;

function networkFormat(nodeId, type, data) {
  var packet = {
    layer: "networkLayer",
    type: type,
    nodeId: nodeId,
    data: data,
    date: Date.now().toString(),
    hash: ""
  };
  packet.hash = (0, _sha.default)(JSON.stringify(packet)).toString();
  var bson = new _bson.BSON();
  return bson.serialize(packet);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9rYWQvS0NvbnN0LnRzIl0sIm5hbWVzIjpbIlNUT1JFIiwiRklORE5PREUiLCJGSU5ETk9ERV9SIiwiRklORFZBTFVFIiwiRklORFZBTFVFX1IiLCJQSU5HIiwiUE9ORyIsIk9OQ09NTUFORCIsIkFERF9LTk9ERSIsIkRJU0NPTk5FQ1RfS05PREUiLCJCUk9BRENBU1QiLCJTRU5EIiwibmV0d29ya0Zvcm1hdCIsIm5vZGVJZCIsInR5cGUiLCJkYXRhIiwicGFja2V0IiwibGF5ZXIiLCJkYXRlIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwiaGFzaCIsIkpTT04iLCJzdHJpbmdpZnkiLCJic29uIiwiQlNPTiIsInNlcmlhbGl6ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFDQTs7OztlQUVlO0FBQ2JBLEVBQUFBLEtBQUssRUFBRSxPQURNO0FBRWJDLEVBQUFBLFFBQVEsRUFBRSxVQUZHO0FBR2JDLEVBQUFBLFVBQVUsRUFBRSxZQUhDO0FBSWJDLEVBQUFBLFNBQVMsRUFBRSxXQUpFO0FBS2JDLEVBQUFBLFdBQVcsRUFBRSxhQUxBO0FBTWJDLEVBQUFBLElBQUksRUFBRSxNQU5PO0FBT2JDLEVBQUFBLElBQUksRUFBRSxNQVBPO0FBUWJDLEVBQUFBLFNBQVMsRUFBRSxXQVJFO0FBU2JDLEVBQUFBLFNBQVMsRUFBRSxXQVRFO0FBVWJDLEVBQUFBLGdCQUFnQixFQUFFLGtCQVZMO0FBV2JDLEVBQUFBLFNBQVMsRUFBRSxXQVhFO0FBWWJDLEVBQUFBLElBQUksRUFBRTtBQVpPLEM7OztBQWVSLFNBQVNDLGFBQVQsQ0FBdUJDLE1BQXZCLEVBQXVDQyxJQUF2QyxFQUFxREMsSUFBckQsRUFBd0U7QUFDN0UsTUFBSUMsTUFBTSxHQUFHO0FBQ1hDLElBQUFBLEtBQUssRUFBRSxjQURJO0FBRVhILElBQUFBLElBQUksRUFBRUEsSUFGSztBQUdYRCxJQUFBQSxNQUFNLEVBQUVBLE1BSEc7QUFJWEUsSUFBQUEsSUFBSSxFQUFFQSxJQUpLO0FBS1hHLElBQUFBLElBQUksRUFBRUMsSUFBSSxDQUFDQyxHQUFMLEdBQVdDLFFBQVgsRUFMSztBQU1YQyxJQUFBQSxJQUFJLEVBQUU7QUFOSyxHQUFiO0FBUUFOLEVBQUFBLE1BQU0sQ0FBQ00sSUFBUCxHQUFjLGtCQUFLQyxJQUFJLENBQUNDLFNBQUwsQ0FBZVIsTUFBZixDQUFMLEVBQTZCSyxRQUE3QixFQUFkO0FBQ0EsTUFBTUksSUFBSSxHQUFHLElBQUlDLFVBQUosRUFBYjtBQUVBLFNBQU9ELElBQUksQ0FBQ0UsU0FBTCxDQUFlWCxNQUFmLENBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzaGExIGZyb20gXCJzaGExXCI7XG5pbXBvcnQgeyBCU09OIH0gZnJvbSBcImJzb25cIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBTVE9SRTogXCJTVE9SRVwiLFxuICBGSU5ETk9ERTogXCJGSU5ETk9ERVwiLFxuICBGSU5ETk9ERV9SOiBcIkZJTkROT0RFX1JcIixcbiAgRklORFZBTFVFOiBcIkZJTkRWQUxVRVwiLFxuICBGSU5EVkFMVUVfUjogXCJGSU5EVkFMVUVfUlwiLFxuICBQSU5HOiBcIlBJTkdcIixcbiAgUE9ORzogXCJQT05HXCIsXG4gIE9OQ09NTUFORDogXCJPTkNPTU1BTkRcIixcbiAgQUREX0tOT0RFOiBcIkFERF9LTk9ERVwiLFxuICBESVNDT05ORUNUX0tOT0RFOiBcIkRJU0NPTk5FQ1RfS05PREVcIixcbiAgQlJPQURDQVNUOiBcIkJST0FEQ0FTVFwiLFxuICBTRU5EOiBcIlNFTkRcIlxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIG5ldHdvcmtGb3JtYXQobm9kZUlkOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgZGF0YTogYW55KTogQnVmZmVyIHtcbiAgbGV0IHBhY2tldCA9IHtcbiAgICBsYXllcjogXCJuZXR3b3JrTGF5ZXJcIixcbiAgICB0eXBlOiB0eXBlLFxuICAgIG5vZGVJZDogbm9kZUlkLFxuICAgIGRhdGE6IGRhdGEsXG4gICAgZGF0ZTogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgIGhhc2g6IFwiXCJcbiAgfTtcbiAgcGFja2V0Lmhhc2ggPSBzaGExKEpTT04uc3RyaW5naWZ5KHBhY2tldCkpLnRvU3RyaW5nKCk7XG4gIGNvbnN0IGJzb24gPSBuZXcgQlNPTigpO1xuXG4gIHJldHVybiBic29uLnNlcmlhbGl6ZShwYWNrZXQpO1xufVxuIl19