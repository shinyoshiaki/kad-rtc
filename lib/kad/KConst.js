"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.networkFormat = networkFormat;
exports.default = void 0;

var _sha = _interopRequireDefault(require("sha1"));

var _bson = require("bson");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _default = {
  STORE: "STORE",
  STORE_CHUNKS: "STORE_CHUNKS",
  FINDNODE: "FINDNODE",
  FINDNODE_R: "FINDNODE_R",
  FINDVALUE: "FINDVALUE",
  FINDVALUE_R: "FINDVALUE_R",
  PING: "PING",
  PONG: "PONG",
  ONCOMMAND: "ONCOMMAND",
  ADD_KNODE: "ADD_KNODE",
  DISCONNECT_KNODE: "DISCONNECT_KNODE",
  BROADCAST: "BROADCAST",
  SEND: "SEND"
};
exports.default = _default;

function networkFormat(nodeId, type, data) {
  var packet = {
    layer: "networkLayer",
    type: type,
    nodeId: nodeId,
    data: data,
    date: Date.now().toString(),
    hash: ""
  };
  packet.hash = (0, _sha.default)(JSON.stringify(packet)).toString();
  var bson = new _bson.BSON();
  return bson.serialize(packet);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9rYWQvS0NvbnN0LnRzIl0sIm5hbWVzIjpbIlNUT1JFIiwiU1RPUkVfQ0hVTktTIiwiRklORE5PREUiLCJGSU5ETk9ERV9SIiwiRklORFZBTFVFIiwiRklORFZBTFVFX1IiLCJQSU5HIiwiUE9ORyIsIk9OQ09NTUFORCIsIkFERF9LTk9ERSIsIkRJU0NPTk5FQ1RfS05PREUiLCJCUk9BRENBU1QiLCJTRU5EIiwibmV0d29ya0Zvcm1hdCIsIm5vZGVJZCIsInR5cGUiLCJkYXRhIiwicGFja2V0IiwibGF5ZXIiLCJkYXRlIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwiaGFzaCIsIkpTT04iLCJzdHJpbmdpZnkiLCJic29uIiwiQlNPTiIsInNlcmlhbGl6ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFDQTs7OztlQUdlO0FBQ2JBLEVBQUFBLEtBQUssRUFBRSxPQURNO0FBRWJDLEVBQUFBLFlBQVksRUFBRSxjQUZEO0FBR2JDLEVBQUFBLFFBQVEsRUFBRSxVQUhHO0FBSWJDLEVBQUFBLFVBQVUsRUFBRSxZQUpDO0FBS2JDLEVBQUFBLFNBQVMsRUFBRSxXQUxFO0FBTWJDLEVBQUFBLFdBQVcsRUFBRSxhQU5BO0FBT2JDLEVBQUFBLElBQUksRUFBRSxNQVBPO0FBUWJDLEVBQUFBLElBQUksRUFBRSxNQVJPO0FBU2JDLEVBQUFBLFNBQVMsRUFBRSxXQVRFO0FBVWJDLEVBQUFBLFNBQVMsRUFBRSxXQVZFO0FBV2JDLEVBQUFBLGdCQUFnQixFQUFFLGtCQVhMO0FBWWJDLEVBQUFBLFNBQVMsRUFBRSxXQVpFO0FBYWJDLEVBQUFBLElBQUksRUFBRTtBQWJPLEM7OztBQWdCUixTQUFTQyxhQUFULENBQXVCQyxNQUF2QixFQUF1Q0MsSUFBdkMsRUFBcURDLElBQXJELEVBQXdFO0FBQzdFLE1BQUlDLE1BQWUsR0FBRztBQUNwQkMsSUFBQUEsS0FBSyxFQUFFLGNBRGE7QUFFcEJILElBQUFBLElBQUksRUFBRUEsSUFGYztBQUdwQkQsSUFBQUEsTUFBTSxFQUFFQSxNQUhZO0FBSXBCRSxJQUFBQSxJQUFJLEVBQUVBLElBSmM7QUFLcEJHLElBQUFBLElBQUksRUFBRUMsSUFBSSxDQUFDQyxHQUFMLEdBQVdDLFFBQVgsRUFMYztBQU1wQkMsSUFBQUEsSUFBSSxFQUFFO0FBTmMsR0FBdEI7QUFRQU4sRUFBQUEsTUFBTSxDQUFDTSxJQUFQLEdBQWMsa0JBQUtDLElBQUksQ0FBQ0MsU0FBTCxDQUFlUixNQUFmLENBQUwsRUFBNkJLLFFBQTdCLEVBQWQ7QUFDQSxNQUFNSSxJQUFJLEdBQUcsSUFBSUMsVUFBSixFQUFiO0FBRUEsU0FBT0QsSUFBSSxDQUFDRSxTQUFMLENBQWVYLE1BQWYsQ0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNoYTEgZnJvbSBcInNoYTFcIjtcbmltcG9ydCB7IEJTT04gfSBmcm9tIFwiYnNvblwiO1xuaW1wb3J0IHsgbmV0d29yayB9IGZyb20gXCIuL2ludGVyZmFjZVwiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIFNUT1JFOiBcIlNUT1JFXCIsXG4gIFNUT1JFX0NIVU5LUzogXCJTVE9SRV9DSFVOS1NcIixcbiAgRklORE5PREU6IFwiRklORE5PREVcIixcbiAgRklORE5PREVfUjogXCJGSU5ETk9ERV9SXCIsXG4gIEZJTkRWQUxVRTogXCJGSU5EVkFMVUVcIixcbiAgRklORFZBTFVFX1I6IFwiRklORFZBTFVFX1JcIixcbiAgUElORzogXCJQSU5HXCIsXG4gIFBPTkc6IFwiUE9OR1wiLFxuICBPTkNPTU1BTkQ6IFwiT05DT01NQU5EXCIsXG4gIEFERF9LTk9ERTogXCJBRERfS05PREVcIixcbiAgRElTQ09OTkVDVF9LTk9ERTogXCJESVNDT05ORUNUX0tOT0RFXCIsXG4gIEJST0FEQ0FTVDogXCJCUk9BRENBU1RcIixcbiAgU0VORDogXCJTRU5EXCJcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXR3b3JrRm9ybWF0KG5vZGVJZDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGRhdGE6IGFueSk6IEJ1ZmZlciB7XG4gIGxldCBwYWNrZXQ6IG5ldHdvcmsgPSB7XG4gICAgbGF5ZXI6IFwibmV0d29ya0xheWVyXCIsXG4gICAgdHlwZTogdHlwZSxcbiAgICBub2RlSWQ6IG5vZGVJZCxcbiAgICBkYXRhOiBkYXRhLFxuICAgIGRhdGU6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICBoYXNoOiBcIlwiXG4gIH07XG4gIHBhY2tldC5oYXNoID0gc2hhMShKU09OLnN0cmluZ2lmeShwYWNrZXQpKS50b1N0cmluZygpO1xuICBjb25zdCBic29uID0gbmV3IEJTT04oKTtcblxuICByZXR1cm4gYnNvbi5zZXJpYWxpemUocGFja2V0KTtcbn1cbiJdfQ==