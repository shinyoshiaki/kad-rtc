{"version":3,"file":"testa.js","sourceRoot":"","sources":["../../../../src/kademlia/actions/store/testa.ts"],"names":[],"mappings":";;;AAAA,6CAAkD;AAClD,iDAAsB;AACtB,wDAAwB;AAExB,MAAM,WAAW,GAAG,CAAC,CAAC;AACtB,MAAM,GAAG,GAAG,CAAC,CAAC;AAEd,QAAQ,CAAC,OAAO,EAAE,GAAG,EAAE;IACrB,IAAI,CACF,OAAO,EACP,GAAS,EAAE;QACT,MAAM,KAAK,GAAG,MAAM,sBAAc,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;QAErD,MAAM,SAAS,GAAG,CAAO,KAAa,EAAE,EAAE;YACxC,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,MAAM,UAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAC3B,CAAC,CAAA,CAAC;QAEF,MAAM,SAAS,CAAC,MAAM,CAAC,CAAC;QAExB,MAAM,CACJ,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,cAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC,CACzE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACf,CAAC,CAAA,EACD,IAAI,GAAG,IAAI,CACZ,CAAC;AACJ,CAAC,CAAC,CAAC","sourcesContent":["import { testSetupNodes } from \"../findnode/testa\"\nimport store from \".\";\nimport sha1 from \"sha1\";\n\nconst kBucketSize = 8;\nconst num = 5;\n\ndescribe(\"store\", () => {\n  test(\n    \"store\",\n    async () => {\n      const nodes = await testSetupNodes(kBucketSize, num);\n\n      const testStore = async (value: string) => {\n        const node = nodes[0];\n        await store(value, node);\n      };\n\n      await testStore(\"test\");\n\n      expect(\n        Object.keys(nodes.slice(-1)[0].kvs.db).includes(sha1(\"test\").toString())\n      ).toBe(true);\n    },\n    1000 * 6000\n  );\n});\n"]}